{{/* assign the path to the $targetPath variable */}} {{- $targetPath := . -}} {{/* check for "scss/" or "sass/" at the start and ".scss" or ".sass" at the end of the targetPath */}} {{- if and (hasPrefix $targetPath (or "scss/" "sass/")) (strings.HasSuffix $targetPath (or ".scss" ".sass")) -}} {{/* return the string, but starting at the 6th character and removing the last 5 characters */}} {{- $targetPath = substr $targetPath 5 -5 -}} {{/* print a new target path */}} {{- $targetPath = printf "css/%s.css" $targetPath -}} {{- end -}} {{/* production options */}} {{- $opts := (dict "traspiler"
"libsass" "targetPath" $targetPath "outputStyle" "compressed" ) -}} {{/* development options */}} {{- if (not hugo.IsProduction) -}} {{- $opts = (dict "traspiler" "libsass" "targetPath" $targetPath "enableSourceMap" true ) -}} {{- end -}} {{/* get source file and compile */}} {{- $style := resources.Get . -}} {{- $style = $style | toCSS $opts -}} {{/* insert link into html */}} <link rel="stylesheet" href="{{ $style.RelPermalink }}" type="text/css" media="all" />
